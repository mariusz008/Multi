<section id="content"  ng-controller="makeStageController">

            <div class="content-wrap">


                    <div class="container clearfix">
    
    
                        <!-- Sidebar -->
                        <div class="sidebar nobottommargin">

                            
                        
                            <div class="sidebar-widgets-wrap">

                            <ul class="sidenav">
                                <li ><a href ng-click="showDescription()">Opis<i class="icon-chevron-right"></i></a></li>
                                <li><a href ng-click="showRunnersList()">Lista zawodników<i class="icon-chevron-right"></i></a></li>
                                <li><a href ng-click="showResultList()">Wyniki<i class="icon-chevron-right"></i></a></li>
                                <li><a href ng-show="editActive" ng-click="editCompetition()">Edytuj<i class="icon-chevron-right"></i></a></li>
                                <li class="ui-tabs-active"><a href="#">Definiuj etapy<i class="icon-chevron-right"></i></a></li>


                            </ul>
                            </div>

</div>
 


                                                                                                           
                                                                                            
                       


 <div class="postcontent nobottommargin col_last">
    <form name="addStageForm" novalidate>
<div class="postcontent nobottommargin col_last">

                            

                            <h2>Definiowanie etapu zawodów "{{name}}"</h2>
                            </h2> </h2>


                        </div> 
        <div id="requestResult" class="well text-center" ng-show="requestResult">{{requestResult}}</div> 

        <div class="container"> 
           <label class="col-lg-2">Nazwa etapu*</label>
            <div class="col-lg-6">
                <input type="text"
                        id="name" 
                        name="name" 
                        class="form-control" 
                        placeholder="Nazwa" 
                        ng-model="competition.name" 
                        required 
                        ng-pattern ="/^[a-żA-Ż0-9\w -]*$/">
                    
                <div ng-messages="addStageForm.name.$error" ng-show="addStageForm.$submitted || addStageForm.name.$touched">
                    <span ng-message="required" class="help-block"> Pole jest wymagane! </span>
                    <span ng-message="pattern" class="help-block">Pole może zawierać tylko litery i cyfry! </span>
                </div>
             </div>
        </div> 
        <br>
        <div class="container">
            <label class="col-lg-2">Data rozpoczęcia*</label>
                        
            <div class="col-lg-6">

            <p class="input-group">
                <input type="text"
                        id="startDate"
                        name="startDate"
                        class="form-control" 
                        uib-datepicker-popup="dd.MM.yyyy" 
                        ng-model="competition.startDate" 
                        is-open="popup1.opened" 
                        datepicker-options="dateOptions"
                        placeholder="dd.mm.rrrr"
                        date-validator
                        required/>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="open1()"><i class="color icon-calendar2 inline-block fright"></i></button>
                </span>
            </p>

                <div ng-messages="addStageForm.startDate.$error" ng-show="addStageForm.$submitted || addStageForm.startDate.$touched">
                    <span ng-show="!addStageForm.startDate.$valid" class="help-block"> Niepoprawnie uzupełnione pole </span>
                </div> 
            </div>
        </div>
        <br>
        <div class="container">
            <label class="col-lg-2">Czas rozpoczęcia*</label>                        
            <div class="col-lg-6">
            <uib-timepicker
                        id="startTime"
                        name="startTime" 
                        ng-model="competition.startTime" 
                        show-meridian="ismeridian" 
                        required>
            </uib-timepicker>                     
                      
               <div ng-messages="addStageForm.startTime.$error" ng-show="addStageForm.$submitted || addStageForm.startTime.$touched">
                    <span ng-message="required" class="help-block">Pole jest wymagane</span>
               </div>
            </div>
        </div>
        <br>
        <div class="container">
            <label class="col-lg-2">Data zakończenia*</label>
            
            <div class="col-lg-6 ">

            <p class="input-group">
                <input type="text"
                        id="endDate"
                        name="endDate"
                        class="form-control" 
                        uib-datepicker-popup="dd.MM.yyyy" 
                        ng-model="competition.endDate" 
                        is-open="popup2.opened" 
                        datepicker-options="dateOptions"
                        placeholder="dd.mm.rrrr"
                        date-validator 
                        required/>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="open2()"><i class="color icon-calendar2 inline-block fright"></i></button>
                </span>
            </p>

                     
                <div ng-messages="addStageForm.endDate.$error" ng-show="addStageForm.$submitted || addStageForm.endDate.$touched">
                    <span ng-show="!addStageForm.endDate.$valid" class="help-block"> Niepoprawnie uzupełnione pole </span>
                </div>
            </div>
        </div>
        <br>       
         <div class="container">
            <label class="col-lg-2">Czas zakończenia*</label>                        
            <div class="col-lg-6">
             <uib-timepicker
                        id="endTime"
                        name="endTime" 
                        ng-model="competition.endTime" 
                        show-meridian="ismeridian" 
                        required>
            </uib-timepicker>  
                      
               <div ng-messages="addStageForm.endTime.$error" ng-show="addStageForm.$submitted || addStageForm.endTime.$touched">
                    <span ng-message="required" class="help-block">Pole jest wymagane</span>
               </div>
            </div>
        </div>
        <br>
        <div class="container">
            <label class="col-lg-2">Miejscowość*</label>
                        
            <div class="col-lg-6">
                <input type="text" 
                            id="city" 
                            name="city" 
                            class="form-control" 
                            ng-model="competition.city"
                            placeholder="Miejscowość"
                            required
                            ng-pattern ="/^[a-żA-Ż0-9\w -]*$/">                       

                <div ng-messages="addStageForm.city.$error" ng-show="addStageForm.$submitted || addStageForm.city.$touched">
                     <span ng-message="pattern" class="help-block">  Pole może zawierać tylko litery </span>
                     <span ng-message="required" class="help-block"> Pole jest wymagane </span>                
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <label class="col-lg-2">Typ*</label>
                        
            <div class="col-lg-6">
                <select type="text"
                        id="type" 
                        name="type" 
                        class="form-control" 
                        ng-model="competition.type"
                        ng-options="type.name group by type.type for type in types" 
                        required>

                        <option value=""> Wybierz typ </option>
                </select>       
                      
               <div ng-messages="addStageForm.type.$error" ng-show="addStageForm.$submitted || addStageForm.type.$touched">
                    <span ng-message="required" class="help-block">Pole jest wymagane</span>
                </div>
            </div>
        </div>

        <br>
        <div class="container">
            <label class="col-lg-1">Logo</label>
            <div class="col-lg-4">
                <input  type="file"
                        id="logo" 
                        name="logo"
                        class="btn btn-primary"
                        ng-model="logo" 
                        maxsize="5"
                        accept="image/jpeg" 
                        base-sixty-four-input> 

                         <div ng-messages="addStageForm.logo.$error" ng-show="addStageForm.$submitted || addStageForm.logo.$touched">
                            <span ng-message="accept" class="help-block"> Zły typ pliku(wymagane rozszerzenie to .jpg)</span>
                            <span ng-message="maxsize" class="help-block">Plik jest za duży (max. 5 KB)</span>                         
                        </div>      

            </div>                       
        </div> 

        <br>
        <div class="container">
            <label class="col-lg-1">Opis</label>
            <div class="col-lg-8">
                <textarea class="form-control"
                        ckeditor="options" 
                        ng-model="competition.description" 
                        ready="onReady()">
                </textarea>               

            </div>                       
        </div> 
        <br>
        <div class="container"><h4>Pola zaznaczone gwiazdką* są wymagane.</h4></div>
        
        <div class="container">
        <div class=" text-center">
             <button  class="btn btn-primary btn-lg" style="margin-right: 200px;" ng-disabled="!addStageForm.$valid" ng-click="makeStageClick()"> Utwórz etap </button>
             </div>
        </div>            
    </form>
    </div>
    </div>
    </div>
    </section>
